!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@antv/x6")):"function"==typeof define&&define.amd?define(["@antv/x6"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).X6)}(this,(function(t){"use strict";function e(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var n=e(t);function s(){}function i(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function o(){return Object.create(null)}function c(t){t.forEach(r)}function a(t){return"function"==typeof t}function u(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,...e){if(null==t)return s;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function h(t){let e;return l(t,(t=>e=t))(),e}function d(t,e,n){t.$$.on_destroy.push(l(e,n))}function $(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function p(t,e){const n={};e=new Set(e);for(const s in t)e.has(s)||"$"===s[0]||(n[s]=t[s]);return n}function f(t,e,n){return t.set(n),e}function g(t){return t&&a(t.destroy)?t.destroy:s}function b(t,e){t.appendChild(e)}function m(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode.removeChild(t)}function y(t){return document.createElement(t)}function v(){return t=" ",document.createTextNode(t);var t}function w(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function E(t,e,n,s){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function _(t){const e={};for(const n of t)e[n.name]=n.value;return e}let k;function C(t){k=t}function j(){if(!k)throw new Error("Function called outside component initialization");return k}function z(t){j().$$.on_destroy.push(t)}function N(){const t=j();return(e,n,{cancelable:s=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=function(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,s,e),i}(e,n,{cancelable:s});return i.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}const O=[],S=[],A=[],R=[],M=Promise.resolve();let P=!1;function T(){P||(P=!0,M.then(L))}function B(t){A.push(t)}const G=new Set;let H=0;function L(){const t=k;do{for(;H<O.length;){const t=O[H];H++,C(t),q(t.$$)}for(C(null),O.length=0,H=0;S.length;)S.pop()();for(let t=0;t<A.length;t+=1){const e=A[t];G.has(e)||(G.add(e),e())}A.length=0}while(O.length);for(;R.length;)R.pop()();P=!1,G.clear(),C(t)}function q(t){if(null!==t.fragment){t.update(),c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(B)}}const D=new Set;let F;function U(t,e){t&&t.i&&(D.delete(t),t.i(e))}function X(t,e,n,s){if(t&&t.o){if(D.has(t))return;D.add(t),undefined.c.push((()=>{D.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}else s&&s()}function I(t,e){const n={},s={},i={$$scope:1};let r=t.length;for(;r--;){const o=t[r],c=e[r];if(c){for(const t in o)t in c||(s[t]=1);for(const t in c)i[t]||(n[t]=c[t],i[t]=1);t[r]=c}else for(const t in o)i[t]=1}for(const t in s)t in n||(n[t]=void 0);return n}function J(t){return"object"==typeof t&&null!==t?t:{}}function K(t){t&&t.c()}function Q(t,e,n,s){const{fragment:i,on_mount:o,on_destroy:u,after_update:l}=t.$$;i&&i.m(e,n),s||B((()=>{const e=o.map(r).filter(a);u?u.push(...e):c(e),t.$$.on_mount=[]})),l.forEach(B)}function V(t,e){const n=t.$$;null!==n.fragment&&(c(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function W(t,e,n,i,r,a,u,l=[-1]){const h=k;C(t);const d=t.$$={fragment:null,ctx:null,props:a,update:s,not_equal:r,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(h?h.$$.context:[])),callbacks:o(),dirty:l,skip_bound:!1,root:e.target||h.$$.root};u&&u(d.root);let $=!1;if(d.ctx=n?n(t,e.props||{},((e,n,...s)=>{const i=s.length?s[0]:n;return d.ctx&&r(d.ctx[e],d.ctx[e]=i)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](i),$&&function(t,e){-1===t.$$.dirty[0]&&(O.push(t),T(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],d.update(),$=!0,c(d.before_update),d.fragment=!!i&&i(d.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);d.fragment&&d.fragment.l(t),t.forEach(x)}else d.fragment&&d.fragment.c();e.intro&&U(t.$$.fragment),Q(t,e.target,e.anchor,e.customElement),L()}C(h)}"function"==typeof HTMLElement&&(F=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(r).filter(a);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){c(this.$$.on_disconnect)}$destroy(){V(this,1),this.$destroy=s}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});const Y=[];function Z(t,e=s){let n;const i=new Set;function r(e){if(u(t,e)&&(t=e,n)){const e=!Y.length;for(const e of i)e[1](),Y.push(e,t);if(e){for(let t=0;t<Y.length;t+=2)Y[t][0](Y[t+1]);Y.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(o,c=s){const a=[o,c];return i.add(a),1===i.size&&(n=e(r)||s),o(t),()=>{i.delete(a),0===i.size&&(n(),n=null)}}}}F.prototype.disconnectedCallback=function(){this.$destroy()};const tt=String(Symbol("x6ContextSymbol")),et=String(Symbol("x6cellContextSymbol"));function nt(t,e){(T(),M).then((()=>{const n=t.getRootNode().host,s=n.$$.context;if(n.parentNode.$$&&n.parentNode.$$.context.forEach(((t,e)=>{s.has(e)||s.set(e,t)})),e){const t=h(s.get(tt)),i=n.parentNode.$$&&h(n.parentNode.$$.context.get(et)),r=e({graph:t,cell:i,host:n});s.set(et,r)}}))}function st(t){let e,n,i,r,o,c;return{c(){e=y("div"),n=y("div"),i=v(),r=y("div"),r.innerHTML="<slot></slot>",o=v(),c=y("link"),this.c=s,w(n,"data-testid","custom-element"),w(n,"class","graph-core"),E(n,"width","100%"),E(n,"height","100%"),w(r,"class","graph-component"),w(e,"class","graph-contaner"),E(e,"width","100%"),E(e,"height","100%"),E(e,"position","relative"),w(c,"rel","stylesheet"),w(c,"type","text/css"),w(c,"href","https://cdnjs.cloudflare.com/ajax/libs/antv-x6/1.34.0/x6.min.css")},m(s,a){m(s,e,a),b(e,n),t[5](n),b(e,i),b(e,r),m(s,o,a),m(s,c,a)},p:s,i:s,o:s,d(n){n&&x(e),t[5](null),n&&x(o),n&&x(c)}}}function it(t,e,s){let i,r,{width:o=800}=e,{height:c=600}=e,{panning:a=!0}=e,u=Z(null);var l,h,$;return d(t,u,(t=>s(6,i=t))),l=tt,h=u,j().$$.context.set(l,h),$=()=>(f(u,i=new n.Graph({container:r,width:o,height:c,panning:!!a}),i),()=>{console.log("onUnMount")}),j().$$.on_mount.push($),t.$$set=t=>{"width"in t&&s(2,o=t.width),"height"in t&&s(3,c=t.height),"panning"in t&&s(4,a=t.panning)},[r,u,o,c,a,function(t){S[t?"unshift":"push"]((()=>{r=t,s(0,r)}))}]}function rt(t){let e,n,i;return{c(){e=y("div"),this.c=s},m(s,r){m(s,e,r),n||(i=g(nt.call(null,e,t[0])),n=!0)},p:s,i:s,o:s,d(t){t&&x(e),n=!1,i()}}}function ot(t,e,n){let{enabled:s=!0}=e;const i={color:"#f5f5f5"};let r;return z((()=>{r&&r.clearBackground()})),t.$$set=t=>{"enabled"in t&&n(1,s=t.enabled)},[t=>{if(r=t.graph,r){const t=Object.assign({},i,{enabled:s});r.clearBackground(),r.drawBackground(t)}},s]}customElements.define("x6-graph",class extends F{constructor(t){super(),W(this,{target:this.shadowRoot,props:_(this.attributes),customElement:!0},it,st,u,{width:2,height:3,panning:4},null),t&&(t.target&&m(t.target,this,t.anchor),t.props&&(this.$set(t.props),L()))}static get observedAttributes(){return["width","height","panning"]}get width(){return this.$$.ctx[2]}set width(t){this.$$set({width:t}),L()}get height(){return this.$$.ctx[3]}set height(t){this.$$set({height:t}),L()}get panning(){return this.$$.ctx[4]}set panning(t){this.$$set({panning:t}),L()}});function ct(t){let e,n,i;return{c(){e=y("div"),this.c=s},m(s,r){m(s,e,r),n||(i=g(nt.call(null,e,t[0])),n=!0)},p:s,i:s,o:s,d(t){t&&x(e),n=!1,i()}}}function at(t,e,n){let{visible:s=!0}=e,{size:i=10}=e,{type:r="dot"}=e;const o={size:10,visible:!0,type:"dot",args:{color:"#a0a0a0",thickness:1}};let c;return z((()=>{c&&c.clearGrid()})),t.$$set=t=>{"visible"in t&&n(1,s=t.visible),"size"in t&&n(2,i=t.size),"type"in t&&n(3,r=t.type)},[t=>{if(c=t.graph,c){const t=Object.assign({},o,{visible:s,size:i,type:r});c.clearGrid(),c.drawGrid(t)}},s,i,r]}customElements.define("x6-background",class extends F{constructor(t){super(),W(this,{target:this.shadowRoot,props:_(this.attributes),customElement:!0},ot,rt,u,{enabled:1},null),t&&(t.target&&m(t.target,this,t.anchor),t.props&&(this.$set(t.props),L()))}static get observedAttributes(){return["enabled"]}get enabled(){return this.$$.ctx[1]}set enabled(t){this.$$set({enabled:t}),L()}});function ut(t){let e,n,i;return{c(){e=y("slot"),this.c=s},m(s,r){m(s,e,r),n||(i=g(nt.call(null,e,t[1])),n=!0)},p:s,i:s,o:s,d(t){t&&x(e),n=!1,i()}}}function lt(e,n,s){let r;const o=["id","shape"];let c,a,u,l=p(n,o),{id:g}=n,{shape:b="rect"}=n,m=Z(null);d(e,m,(t=>s(7,c=t)));const x=N();z((()=>{console.log("onDestroy");const t=h(m);u&&u.removeChild(t),a&&a.removeCell(t)}));return e.$$set=t=>{n=i(i({},n),$(t)),s(9,l=p(n,o)),"id"in t&&s(2,g=t.id),"shape"in t&&s(3,b=t.shape)},e.$$.update=()=>{r={id:g,...l}},[m,e=>{if(a=e.graph,u=e.cell,a){const e=t.Node.registry.get(b)||t.Edge.registry.get(b)||t.Cell,n=f(m,c=new e(r),c);n.once("added",(t=>x("added",t))),n.once("removed",(t=>x("removed",t))),n.on("cell:change:*",(t=>x("change",t))),u&&u.addChild(n),a.addCell(n)}return m},g,b]}customElements.define("x6-grid",class extends F{constructor(t){super(),W(this,{target:this.shadowRoot,props:_(this.attributes),customElement:!0},at,ct,u,{visible:1,size:2,type:3},null),t&&(t.target&&m(t.target,this,t.anchor),t.props&&(this.$set(t.props),L()))}static get observedAttributes(){return["visible","size","type"]}get visible(){return this.$$.ctx[1]}set visible(t){this.$$set({visible:t}),L()}get size(){return this.$$.ctx[2]}set size(t){this.$$set({size:t}),L()}get type(){return this.$$.ctx[3]}set type(t){this.$$set({type:t}),L()}});class ht extends F{constructor(t){super(),W(this,{target:this.shadowRoot,props:_(this.attributes),customElement:!0},lt,ut,u,{id:2,shape:3},null),t&&(t.target&&m(t.target,this,t.anchor),t.props&&(this.$set(t.props),L()))}static get observedAttributes(){return["id","shape"]}get id(){return this.$$.ctx[2]}set id(t){this.$$set({id:t}),L()}get shape(){return this.$$.ctx[3]}set shape(t){this.$$set({shape:t}),L()}}function dt(t){let e;return{c(){e=y("slot")},m(t,n){m(t,e,n)},p:s,d(t){t&&x(e)}}}function $t(t){let e,n;const r=[t[0]];let o={$$slots:{default:[dt]},$$scope:{ctx:t}};for(let t=0;t<r.length;t+=1)o=i(o,r[t]);return e=new ht({props:o}),{c(){K(e.$$.fragment),this.c=s},m(t,s){Q(e,t,s),n=!0},p(t,[n]){const s=1&n?I(r,[J(t[0])]):{};1024&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){X(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function pt(t,e,n){let s;const r=["id","shape","label","x","y","width","height","angle"];let o=p(e,r),{id:c}=e,{shape:a="rect"}=e,{label:u=""}=e,{x:l=0}=e,{y:h=0}=e,{width:d=160}=e,{height:f=40}=e,{angle:g=0}=e;return t.$$set=t=>{e=i(i({},e),$(t)),n(9,o=p(e,r)),"id"in t&&n(1,c=t.id),"shape"in t&&n(2,a=t.shape),"label"in t&&n(3,u=t.label),"x"in t&&n(4,l=t.x),"y"in t&&n(5,h=t.y),"width"in t&&n(6,d=t.width),"height"in t&&n(7,f=t.height),"angle"in t&&n(8,g=t.angle)},t.$$.update=()=>{n(0,s={...o,id:c,shape:a,label:u,width:Number(d)||160,height:Number(f)||40,x:Number(l)||0,y:Number(h)||0,angle:Number(g)||0})},[s,c,a,u,l,h,d,f,g]}customElements.define("x6-cell",ht);function ft(t){let e,n;const r=[t[0]];let o={};for(let t=0;t<r.length;t+=1)o=i(o,r[t]);return e=new ht({props:o}),{c(){K(e.$$.fragment),this.c=s},m(t,s){Q(e,t,s),n=!0},p(t,[n]){const s=1&n?I(r,[J(t[0])]):{};e.$set(s)},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){X(e.$$.fragment,t),n=!1},d(t){V(e,t)}}}function gt(t,e,n){let s;const r=["id","shape","source","target"];let o=p(e,r),{id:c}=e,{shape:a="edge"}=e,{source:u}=e,{target:l}=e;return t.$$set=t=>{e=i(i({},e),$(t)),n(5,o=p(e,r)),"id"in t&&n(1,c=t.id),"shape"in t&&n(2,a=t.shape),"source"in t&&n(3,u=t.source),"target"in t&&n(4,l=t.target)},t.$$.update=()=>{n(0,s={...o,id:c,shape:a,source:u,target:l})},[s,c,a,u,l]}customElements.define("x6-node",class extends F{constructor(t){super(),W(this,{target:this.shadowRoot,props:_(this.attributes),customElement:!0},pt,$t,u,{id:1,shape:2,label:3,x:4,y:5,width:6,height:7,angle:8},null),t&&(t.target&&m(t.target,this,t.anchor),t.props&&(this.$set(t.props),L()))}static get observedAttributes(){return["id","shape","label","x","y","width","height","angle"]}get id(){return this.$$.ctx[1]}set id(t){this.$$set({id:t}),L()}get shape(){return this.$$.ctx[2]}set shape(t){this.$$set({shape:t}),L()}get label(){return this.$$.ctx[3]}set label(t){this.$$set({label:t}),L()}get x(){return this.$$.ctx[4]}set x(t){this.$$set({x:t}),L()}get y(){return this.$$.ctx[5]}set y(t){this.$$set({y:t}),L()}get width(){return this.$$.ctx[6]}set width(t){this.$$set({width:t}),L()}get height(){return this.$$.ctx[7]}set height(t){this.$$set({height:t}),L()}get angle(){return this.$$.ctx[8]}set angle(t){this.$$set({angle:t}),L()}});customElements.define("x6-edge",class extends F{constructor(t){super(),W(this,{target:this.shadowRoot,props:_(this.attributes),customElement:!0},gt,ft,u,{id:1,shape:2,source:3,target:4},null),t&&(t.target&&m(t.target,this,t.anchor),t.props&&(this.$set(t.props),L()))}static get observedAttributes(){return["id","shape","source","target"]}get id(){return this.$$.ctx[1]}set id(t){this.$$set({id:t}),L()}get shape(){return this.$$.ctx[2]}set shape(t){this.$$set({shape:t}),L()}get source(){return this.$$.ctx[3]}set source(t){this.$$set({source:t}),L()}get target(){return this.$$.ctx[4]}set target(t){this.$$set({target:t}),L()}})}));
