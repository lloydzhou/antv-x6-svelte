!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@antv/x6")):"function"==typeof define&&define.amd?define(["@antv/x6"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).X6)}(this,(function(t){"use strict";function e(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var n=e(t);function s(){}function i(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function o(){return Object.create(null)}function c(t){t.forEach(r)}function a(t){return"function"==typeof t}function u(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e}function h(t,...e){if(null==t)return s;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function d(t){let e;return h(t,(t=>e=t))(),e}function p(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function $(t,e){const n={};e=new Set(e);for(const s in t)e.has(s)||"$"===s[0]||(n[s]=t[s]);return n}function g(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode.removeChild(t)}function m(t){return document.createElement(t)}function x(){return t=" ",document.createTextNode(t);var t}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e,n,s){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function w(t){const e={};for(const n of t)e[n.name]=n.value;return e}let k;function E(t){k=t}function z(){if(!k)throw new Error("Function called outside component initialization");return k}function _(t){z().$$.on_mount.push(t)}function C(){const t=z();return(e,n,{cancelable:s=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=function(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,s,e),i}(e,n,{cancelable:s});return i.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}function j(t,e){return z().$$.context.set(t,e),e}const N=[],O=[],I=[],S=[],A=Promise.resolve();let P=!1;function T(t){I.push(t)}const M=new Set;let R=0;function B(){const t=k;do{for(;R<N.length;){const t=N[R];R++,E(t),G(t.$$)}for(E(null),N.length=0,R=0;O.length;)O.pop()();for(let t=0;t<I.length;t+=1){const e=I[t];M.has(e)||(M.add(e),e())}I.length=0}while(N.length);for(;S.length;)S.pop()();P=!1,M.clear(),E(t)}function G(t){if(null!==t.fragment){t.update(),c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(T)}}const H=new Set;function L(t,e){-1===t.$$.dirty[0]&&(N.push(t),P||(P=!0,A.then(B)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function q(t,e,n,i,u,l,h,d=[-1]){const p=k;E(t);const $=t.$$={fragment:null,ctx:null,props:l,update:s,not_equal:u,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(p?p.$$.context:[])),callbacks:o(),dirty:d,skip_bound:!1,root:e.target||p.$$.root};h&&h($.root);let g=!1;if($.ctx=n?n(t,e.props||{},((e,n,...s)=>{const i=s.length?s[0]:n;return $.ctx&&u($.ctx[e],$.ctx[e]=i)&&(!$.skip_bound&&$.bound[e]&&$.bound[e](i),g&&L(t,e)),n})):[],$.update(),g=!0,c($.before_update),$.fragment=!!i&&i($.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);$.fragment&&$.fragment.l(t),t.forEach(b)}else $.fragment&&$.fragment.c();e.intro&&((f=t.$$.fragment)&&f.i&&(H.delete(f),f.i(m))),function(t,e,n,s){const{fragment:i,on_mount:o,on_destroy:u,after_update:l}=t.$$;i&&i.m(e,n),s||T((()=>{const e=o.map(r).filter(a);u?u.push(...e):c(e),t.$$.on_mount=[]})),l.forEach(T)}(t,e.target,e.anchor,e.customElement),B()}var f,m;E(p)}let D;"function"==typeof HTMLElement&&(D=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(r).filter(a);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){c(this.$$.on_disconnect)}$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(c(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=s}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});const F=[];function X(t,e=s){let n;const i=new Set;function r(e){if(u(t,e)&&(t=e,n)){const e=!F.length;for(const e of i)e[1](),F.push(e,t);if(e){for(let t=0;t<F.length;t+=2)F[t][0](F[t+1]);F.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(o,c=s){const a=[o,c];return i.add(a),1===i.size&&(n=e(r)||s),o(t),()=>{i.delete(a),0===i.size&&(n(),n=null)}}}}const J=String(Symbol("x6ContextSymbol")),K=String(Symbol("x6cellContextSymbol"));function Q(t){const e=t.parentNode.$$.context,n=e&&e.get(J);if(n){t.$$.context.set(J,n)}return{graph:n,parent:e&&e.get(K)}}const U=(t,e,n,s)=>{e(n,s),t.dispatchEvent&&t.dispatchEvent(new CustomEvent(n,{detail:s}))};function V(t){let e,n,i,r,o,c;return{c(){e=m("link"),n=x(),i=m("div"),r=m("div"),o=x(),c=m("div"),c.innerHTML="<slot></slot>",this.c=s,y(e,"rel","stylesheet"),y(e,"type","text/css"),y(e,"href",t[0]),y(r,"data-testid","custom-element"),y(r,"class","graph-core"),v(r,"width","100%"),v(r,"height","100%"),y(c,"class","graph-component"),y(i,"class","graph-contaner"),v(i,"width","100%"),v(i,"height","100%"),v(i,"position","relative")},m(s,a){f(s,e,a),f(s,n,a),f(s,i,a),g(i,r),t[5](r),g(i,o),g(i,c)},p(t,[n]){1&n&&y(e,"href",t[0])},i:s,o:s,d(s){s&&b(e),s&&b(n),s&&b(i),t[5](null)}}}function W(t,e,s){let i,{width:r=800}=e,{height:o=600}=e,{panning:c=!0}=e,{css:a="https://cdnjs.cloudflare.com/ajax/libs/antv-x6/1.34.0/x6.min.css"}=e,u=X(null);j(J,u);const l=z(),h=C();return _((()=>{const t=new n.Graph({container:i,width:r,height:o,panning:!!c});return u.set(t),U(l,h,"load",t),()=>{t.dispose()}})),t.$$set=t=>{"width"in t&&s(2,r=t.width),"height"in t&&s(3,o=t.height),"panning"in t&&s(4,c=t.panning),"css"in t&&s(0,a=t.css)},[a,i,r,o,c,function(t){O[t?"unshift":"push"]((()=>{i=t,s(1,i)}))}]}function Y(t){return{c(){this.c=s},m:s,p:s,i:s,o:s,d:s}}function Z(t,e,n){let{enabled:s=!0}=e;const i={color:"#f5f5f5"},r=z();return _((()=>{const{graph:t}=Q(r),e=t&&d(t);if(e){const t=Object.assign({},i,{enabled:s});e.clearBackground(),e.drawBackground(t)}return()=>{e&&e.clearBackground()}})),t.$$set=t=>{"enabled"in t&&n(0,s=t.enabled)},[s]}customElements.define("x6-graph",class extends D{constructor(t){super(),q(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},W,V,u,{width:2,height:3,panning:4,css:0},null),t&&(t.target&&f(t.target,this,t.anchor),t.props&&(this.$set(t.props),B()))}static get observedAttributes(){return["width","height","panning","css"]}get width(){return this.$$.ctx[2]}set width(t){this.$$set({width:t}),B()}get height(){return this.$$.ctx[3]}set height(t){this.$$set({height:t}),B()}get panning(){return this.$$.ctx[4]}set panning(t){this.$$set({panning:t}),B()}get css(){return this.$$.ctx[0]}set css(t){this.$$set({css:t}),B()}});function tt(t){return{c(){this.c=s},m:s,p:s,i:s,o:s,d:s}}function et(t,e,n){let{visible:s=!0}=e,{size:i=10}=e,{type:r="dot"}=e;const o={size:10,visible:!0,type:"dot",args:{color:"#a0a0a0",thickness:1}},c=z();return _((()=>{const{graph:t}=Q(c),e=t&&d(t);if(e){const t=Object.assign({},o,{visible:s,size:i,type:r});e.clearGrid(),e.drawGrid(t)}return()=>{e&&e.clearGrid()}})),t.$$set=t=>{"visible"in t&&n(0,s=t.visible),"size"in t&&n(1,i=t.size),"type"in t&&n(2,r=t.type)},[s,i,r]}customElements.define("x6-background",class extends D{constructor(t){super(),q(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},Z,Y,u,{enabled:0},null),t&&(t.target&&f(t.target,this,t.anchor),t.props&&(this.$set(t.props),B()))}static get observedAttributes(){return["enabled"]}get enabled(){return this.$$.ctx[0]}set enabled(t){this.$$set({enabled:t}),B()}});customElements.define("x6-grid",class extends D{constructor(t){super(),q(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},et,tt,u,{visible:0,size:1,type:2},null),t&&(t.target&&f(t.target,this,t.anchor),t.props&&(this.$set(t.props),B()))}static get observedAttributes(){return["visible","size","type"]}get visible(){return this.$$.ctx[0]}set visible(t){this.$$set({visible:t}),B()}get size(){return this.$$.ctx[1]}set size(t){this.$$set({size:t}),B()}get type(){return this.$$.ctx[2]}set type(t){this.$$set({type:t}),B()}});const nt=(e,n,s,i)=>{const r=d(e.graph),o=d(e.parent);if(r){const{shape:e}=n,c=new(t.Node.registry.get(e)||t.Edge.registry.get(e)||t.Cell)(n);s.set(c),c.once("added",(t=>i("load",t)&&i("added",t))),c.once("removed",(t=>i("close",t)&&i("removed"))),c.on("change:*",(t=>i("change",t))),o&&o.addChild(c),r.addCell(c)}return()=>{const t=d(s);o&&o.removeChild(t),r&&r.removeCell(t)}};function st(t){let e;return{c(){e=m("slot"),this.c=s},m(t,n){f(t,e,n)},p:s,i:s,o:s,d(t){t&&b(e)}}}function it(t,e,n){let s;const r=["id","shape","label","x","y","width","height","angle","markup","zIndex","visible"];let o,c=$(e,r),a=X(null);var u,g;u=a,g=t=>n(13,o=t),t.$$.on_destroy.push(h(u,g)),j(K,a);const f=C();let{id:b}=e,{shape:m="rect"}=e,{label:x=""}=e,{x:y=0}=e,{y:v=0}=e,{width:w=160}=e,{height:k=40}=e,{angle:E=0}=e,{markup:N}=e,{zIndex:O}=e,{visible:I=!0}=e;var S;S=()=>{const t=d(a);if(t){Object.keys(s).forEach((e=>{const n=s[e];void 0!==n&&(["angle","attrs","visible","parent","zIndex","data"].indexOf(e)>-1&&n&&l(t.prop(e),n)&&(console.log("setProp",e,n,t.prop(e)),t.prop(e,n)),"label"===e&&n&&l(t.attr("label/text"),n)&&t.attr("label/text",n))}));const{x:e,y:n}=t.prop("position");s.x&&s.y&&(l(e,s.x)||l(n,s.y))&&t.prop("position",{x:Number(s.x),y:Number(s.y)});const{width:i,height:r}=t.prop("size");s.width&&s.height&&(l(i,s.width)||l(r,s.height))&&t.prop("size",{width:Number(s.width),height:Number(s.height)}),s.id&&l(t.id,s.id)&&(function(t,e,n){t.set(n)}(a,o=t.model.updateCellId(t,s.id),o),console.log("$cell",o))}},z().$$.after_update.push(S);const A=z();return _((()=>{const t=Q(A);return nt(t,s,a,U.bind(null,A,f))})),t.$$set=t=>{e=i(i({},e),p(t)),n(16,c=$(e,r)),"id"in t&&n(1,b=t.id),"shape"in t&&n(2,m=t.shape),"label"in t&&n(3,x=t.label),"x"in t&&n(4,y=t.x),"y"in t&&n(5,v=t.y),"width"in t&&n(6,w=t.width),"height"in t&&n(7,k=t.height),"angle"in t&&n(8,E=t.angle),"markup"in t&&n(9,N=t.markup),"zIndex"in t&&n(10,O=t.zIndex),"visible"in t&&n(11,I=t.visible)},t.$$.update=()=>{s={...c,id:b,shape:m,label:x,width:Number(w)||160,height:Number(k)||40,x:Number(y)||0,y:Number(v)||0,angle:Number(E)||0,markup:N,zIndex:O,visible:I}},[a,b,m,x,y,v,w,k,E,N,O,I]}function rt(t){return{c(){this.c=s},m:s,p:s,i:s,o:s,d:s}}function ot(t,e,n){let s;const r=["id","shape","source","target"];let o=$(e,r),{id:c}=e,{shape:a="edge"}=e,{source:u}=e,{target:l}=e,h=X(null);j(K,h);const d=z(),g=C();return _((()=>{const t=Q(d);return nt(t,s,h,U.bind(null,d,g))})),t.$$set=t=>{e=i(i({},e),p(t)),n(8,o=$(e,r)),"id"in t&&n(0,c=t.id),"shape"in t&&n(1,a=t.shape),"source"in t&&n(2,u=t.source),"target"in t&&n(3,l=t.target)},t.$$.update=()=>{s={...o,id:c,shape:a,source:u,target:l}},[c,a,u,l]}customElements.define("x6-node",class extends D{constructor(t){super(),q(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},it,st,u,{id:1,shape:2,label:3,x:4,y:5,width:6,height:7,angle:8,markup:9,zIndex:10,visible:11},null),t&&(t.target&&f(t.target,this,t.anchor),t.props&&(this.$set(t.props),B()))}static get observedAttributes(){return["id","shape","label","x","y","width","height","angle","markup","zIndex","visible"]}get id(){return this.$$.ctx[1]}set id(t){this.$$set({id:t}),B()}get shape(){return this.$$.ctx[2]}set shape(t){this.$$set({shape:t}),B()}get label(){return this.$$.ctx[3]}set label(t){this.$$set({label:t}),B()}get x(){return this.$$.ctx[4]}set x(t){this.$$set({x:t}),B()}get y(){return this.$$.ctx[5]}set y(t){this.$$set({y:t}),B()}get width(){return this.$$.ctx[6]}set width(t){this.$$set({width:t}),B()}get height(){return this.$$.ctx[7]}set height(t){this.$$set({height:t}),B()}get angle(){return this.$$.ctx[8]}set angle(t){this.$$set({angle:t}),B()}get markup(){return this.$$.ctx[9]}set markup(t){this.$$set({markup:t}),B()}get zIndex(){return this.$$.ctx[10]}set zIndex(t){this.$$set({zIndex:t}),B()}get visible(){return this.$$.ctx[11]}set visible(t){this.$$set({visible:t}),B()}});customElements.define("x6-edge",class extends D{constructor(t){super(),q(this,{target:this.shadowRoot,props:w(this.attributes),customElement:!0},ot,rt,u,{id:0,shape:1,source:2,target:3},null),t&&(t.target&&f(t.target,this,t.anchor),t.props&&(this.$set(t.props),B()))}static get observedAttributes(){return["id","shape","source","target"]}get id(){return this.$$.ctx[0]}set id(t){this.$$set({id:t}),B()}get shape(){return this.$$.ctx[1]}set shape(t){this.$$set({shape:t}),B()}get source(){return this.$$.ctx[2]}set source(t){this.$$set({source:t}),B()}get target(){return this.$$.ctx[3]}set target(t){this.$$set({target:t}),B()}})}));
