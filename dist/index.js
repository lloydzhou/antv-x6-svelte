!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@antv/x6")):"function"==typeof define&&define.amd?define(["@antv/x6"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).X6)}(this,(function(t){"use strict";function e(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var n=e(t);function s(){}function i(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function o(){return Object.create(null)}function c(t){t.forEach(r)}function u(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function h(t){let e;return function(t,...e){if(null==t)return s;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}(t,(t=>e=t))(),e}function l(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function d(t,e){const n={};e=new Set(e);for(const s in t)e.has(s)||"$"===s[0]||(n[s]=t[s]);return n}function $(t,e){t.appendChild(e)}function g(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function b(){return t=" ",document.createTextNode(t);var t}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function x(t,e,n,s){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function y(t){const e={};for(const n of t)e[n.name]=n.value;return e}let v;function w(t){v=t}function E(){if(!v)throw new Error("Function called outside component initialization");return v}function _(t){E().$$.on_mount.push(t)}function k(){const t=E();return(e,n,{cancelable:s=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=function(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,s,e),i}(e,n,{cancelable:s});return i.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}function C(t,e){return E().$$.context.set(t,e),e}const z=[],j=[],O=[],S=[],N=Promise.resolve();let A=!1;function P(t){O.push(t)}const T=new Set;let M=0;function R(){const t=v;do{for(;M<z.length;){const t=z[M];M++,w(t),B(t.$$)}for(w(null),z.length=0,M=0;j.length;)j.pop()();for(let t=0;t<O.length;t+=1){const e=O[t];T.has(e)||(T.add(e),e())}O.length=0}while(z.length);for(;S.length;)S.pop()();A=!1,T.clear(),w(t)}function B(t){if(null!==t.fragment){t.update(),c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(P)}}const G=new Set;function H(t,e){-1===t.$$.dirty[0]&&(z.push(t),A||(A=!0,N.then(R)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function L(t,e,n,i,a,h,l,d=[-1]){const $=v;w(t);const g=t.$$={fragment:null,ctx:null,props:h,update:s,not_equal:a,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||($?$.$$.context:[])),callbacks:o(),dirty:d,skip_bound:!1,root:e.target||$.$$.root};l&&l(g.root);let f=!1;if(g.ctx=n?n(t,e.props||{},((e,n,...s)=>{const i=s.length?s[0]:n;return g.ctx&&a(g.ctx[e],g.ctx[e]=i)&&(!g.skip_bound&&g.bound[e]&&g.bound[e](i),f&&H(t,e)),n})):[],g.update(),f=!0,c(g.before_update),g.fragment=!!i&&i(g.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);g.fragment&&g.fragment.l(t),t.forEach(p)}else g.fragment&&g.fragment.c();e.intro&&((b=t.$$.fragment)&&b.i&&(G.delete(b),b.i(m))),function(t,e,n,s){const{fragment:i,on_mount:o,on_destroy:a,after_update:h}=t.$$;i&&i.m(e,n),s||P((()=>{const e=o.map(r).filter(u);a?a.push(...e):c(e),t.$$.on_mount=[]})),h.forEach(P)}(t,e.target,e.anchor,e.customElement),R()}var b,m;w($)}let q;"function"==typeof HTMLElement&&(q=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(r).filter(u);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){c(this.$$.on_disconnect)}$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(c(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=s}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});const D=[];function F(t,e=s){let n;const i=new Set;function r(e){if(a(t,e)&&(t=e,n)){const e=!D.length;for(const e of i)e[1](),D.push(e,t);if(e){for(let t=0;t<D.length;t+=2)D[t][0](D[t+1]);D.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(o,c=s){const u=[o,c];return i.add(u),1===i.size&&(n=e(r)||s),o(t),()=>{i.delete(u),0===i.size&&(n(),n=null)}}}}const X=String(Symbol("x6ContextSymbol")),I=String(Symbol("x6cellContextSymbol"));function J(t){const e=t.parentNode.$$.context,n=e&&e.get(X);if(n){t.$$.context.set(X,n)}return{graph:n,parent:e&&e.get(I)}}function K(t){let e,n,i,r,o,c;return{c(){e=f("link"),n=b(),i=f("div"),r=f("div"),o=b(),c=f("div"),c.innerHTML="<slot></slot>",this.c=s,m(e,"rel","stylesheet"),m(e,"type","text/css"),m(e,"href",t[0]),m(r,"data-testid","custom-element"),m(r,"class","graph-core"),x(r,"width","100%"),x(r,"height","100%"),m(c,"class","graph-component"),m(i,"class","graph-contaner"),x(i,"width","100%"),x(i,"height","100%"),x(i,"position","relative")},m(s,u){g(s,e,u),g(s,n,u),g(s,i,u),$(i,r),t[5](r),$(i,o),$(i,c)},p(t,[n]){1&n&&m(e,"href",t[0])},i:s,o:s,d(s){s&&p(e),s&&p(n),s&&p(i),t[5](null)}}}function Q(t,e,s){let i,{width:r=800}=e,{height:o=600}=e,{panning:c=!0}=e,{css:u="https://cdnjs.cloudflare.com/ajax/libs/antv-x6/1.34.0/x6.min.css"}=e,a=F(null);return C(X,a),_((()=>{const t=new n.Graph({container:i,width:r,height:o,panning:!!c});return a.set(t),()=>{t.dispose()}})),t.$$set=t=>{"width"in t&&s(2,r=t.width),"height"in t&&s(3,o=t.height),"panning"in t&&s(4,c=t.panning),"css"in t&&s(0,u=t.css)},[u,i,r,o,c,function(t){j[t?"unshift":"push"]((()=>{i=t,s(1,i)}))}]}function U(t){return{c(){this.c=s},m:s,p:s,i:s,o:s,d:s}}function V(t,e,n){let{enabled:s=!0}=e;const i={color:"#f5f5f5"},r=E();return _((()=>{const{graph:t}=J(r),e=t&&h(t);if(e){const t=Object.assign({},i,{enabled:s});e.clearBackground(),e.drawBackground(t)}return()=>{e&&e.clearBackground()}})),t.$$set=t=>{"enabled"in t&&n(0,s=t.enabled)},[s]}customElements.define("x6-graph",class extends q{constructor(t){super(),L(this,{target:this.shadowRoot,props:y(this.attributes),customElement:!0},Q,K,a,{width:2,height:3,panning:4,css:0},null),t&&(t.target&&g(t.target,this,t.anchor),t.props&&(this.$set(t.props),R()))}static get observedAttributes(){return["width","height","panning","css"]}get width(){return this.$$.ctx[2]}set width(t){this.$$set({width:t}),R()}get height(){return this.$$.ctx[3]}set height(t){this.$$set({height:t}),R()}get panning(){return this.$$.ctx[4]}set panning(t){this.$$set({panning:t}),R()}get css(){return this.$$.ctx[0]}set css(t){this.$$set({css:t}),R()}});function W(t){return{c(){this.c=s},m:s,p:s,i:s,o:s,d:s}}function Y(t,e,n){let{visible:s=!0}=e,{size:i=10}=e,{type:r="dot"}=e;const o={size:10,visible:!0,type:"dot",args:{color:"#a0a0a0",thickness:1}},c=E();return _((()=>{const{graph:t}=J(c),e=t&&h(t);if(e){const t=Object.assign({},o,{visible:s,size:i,type:r});e.clearGrid(),e.drawGrid(t)}return()=>{e&&e.clearGrid()}})),t.$$set=t=>{"visible"in t&&n(0,s=t.visible),"size"in t&&n(1,i=t.size),"type"in t&&n(2,r=t.type)},[s,i,r]}customElements.define("x6-background",class extends q{constructor(t){super(),L(this,{target:this.shadowRoot,props:y(this.attributes),customElement:!0},V,U,a,{enabled:0},null),t&&(t.target&&g(t.target,this,t.anchor),t.props&&(this.$set(t.props),R()))}static get observedAttributes(){return["enabled"]}get enabled(){return this.$$.ctx[0]}set enabled(t){this.$$set({enabled:t}),R()}});customElements.define("x6-grid",class extends q{constructor(t){super(),L(this,{target:this.shadowRoot,props:y(this.attributes),customElement:!0},Y,W,a,{visible:0,size:1,type:2},null),t&&(t.target&&g(t.target,this,t.anchor),t.props&&(this.$set(t.props),R()))}static get observedAttributes(){return["visible","size","type"]}get visible(){return this.$$.ctx[0]}set visible(t){this.$$set({visible:t}),R()}get size(){return this.$$.ctx[1]}set size(t){this.$$set({size:t}),R()}get type(){return this.$$.ctx[2]}set type(t){this.$$set({type:t}),R()}});const Z=(e,n,s,i)=>{const r=h(e.graph),o=h(e.parent);if(r){const{shape:e}=n,c=new(t.Node.registry.get(e)||t.Edge.registry.get(e)||t.Cell)(n);s.set(c),c.once("added",(t=>i("added",t))),c.once("removed",(t=>i("removed",t))),c.on("cell:change:*",(t=>i("change",t))),o&&o.addChild(c),r.addCell(c)}return()=>{const t=h(s);o&&o.removeChild(t),r&&r.removeCell(t)}};function tt(t){let e;return{c(){e=f("slot"),this.c=s},m(t,n){g(t,e,n)},p:s,i:s,o:s,d(t){t&&p(e)}}}function et(t,e,n){let s;const r=["id","shape","label","x","y","width","height","angle"];let o=d(e,r),c=F(null);C(I,c);const u=k();let{id:a}=e,{shape:h="rect"}=e,{label:$=""}=e,{x:g=0}=e,{y:p=0}=e,{width:f=160}=e,{height:b=40}=e,{angle:m=0}=e;const x=E();return _((()=>{const t=J(x);return Z(t,s,c,u)})),t.$$set=t=>{e=i(i({},e),l(t)),n(12,o=d(e,r)),"id"in t&&n(0,a=t.id),"shape"in t&&n(1,h=t.shape),"label"in t&&n(2,$=t.label),"x"in t&&n(3,g=t.x),"y"in t&&n(4,p=t.y),"width"in t&&n(5,f=t.width),"height"in t&&n(6,b=t.height),"angle"in t&&n(7,m=t.angle)},t.$$.update=()=>{s={...o,id:a,shape:h,label:$,width:Number(f)||160,height:Number(b)||40,x:Number(g)||0,y:Number(p)||0,angle:Number(m)||0}},[a,h,$,g,p,f,b,m]}function nt(t){return{c(){this.c=s},m:s,p:s,i:s,o:s,d:s}}function st(t,e,n){let s;const r=["id","shape","source","target"];let o=d(e,r),{id:c}=e,{shape:u="edge"}=e,{source:a}=e,{target:h}=e,$=F(null);C(I,$);const g=k(),p=E();return _((()=>{const t=J(p);return Z(t,s,$,g)})),t.$$set=t=>{e=i(i({},e),l(t)),n(8,o=d(e,r)),"id"in t&&n(0,c=t.id),"shape"in t&&n(1,u=t.shape),"source"in t&&n(2,a=t.source),"target"in t&&n(3,h=t.target)},t.$$.update=()=>{s={...o,id:c,shape:u,source:a,target:h}},[c,u,a,h]}customElements.define("x6-node",class extends q{constructor(t){super(),L(this,{target:this.shadowRoot,props:y(this.attributes),customElement:!0},et,tt,a,{id:0,shape:1,label:2,x:3,y:4,width:5,height:6,angle:7},null),t&&(t.target&&g(t.target,this,t.anchor),t.props&&(this.$set(t.props),R()))}static get observedAttributes(){return["id","shape","label","x","y","width","height","angle"]}get id(){return this.$$.ctx[0]}set id(t){this.$$set({id:t}),R()}get shape(){return this.$$.ctx[1]}set shape(t){this.$$set({shape:t}),R()}get label(){return this.$$.ctx[2]}set label(t){this.$$set({label:t}),R()}get x(){return this.$$.ctx[3]}set x(t){this.$$set({x:t}),R()}get y(){return this.$$.ctx[4]}set y(t){this.$$set({y:t}),R()}get width(){return this.$$.ctx[5]}set width(t){this.$$set({width:t}),R()}get height(){return this.$$.ctx[6]}set height(t){this.$$set({height:t}),R()}get angle(){return this.$$.ctx[7]}set angle(t){this.$$set({angle:t}),R()}});customElements.define("x6-edge",class extends q{constructor(t){super(),L(this,{target:this.shadowRoot,props:y(this.attributes),customElement:!0},st,nt,a,{id:0,shape:1,source:2,target:3},null),t&&(t.target&&g(t.target,this,t.anchor),t.props&&(this.$set(t.props),R()))}static get observedAttributes(){return["id","shape","source","target"]}get id(){return this.$$.ctx[0]}set id(t){this.$$set({id:t}),R()}get shape(){return this.$$.ctx[1]}set shape(t){this.$$set({shape:t}),R()}get source(){return this.$$.ctx[2]}set source(t){this.$$set({source:t}),R()}get target(){return this.$$.ctx[3]}set target(t){this.$$set({target:t}),R()}})}));
