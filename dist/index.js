!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@antv/x6")):"function"==typeof define&&define.amd?define(["@antv/x6"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).X6)}(this,(function(t){"use strict";function e(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var n=e(t);function s(){}function i(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function o(){return Object.create(null)}function c(t){t.forEach(r)}function a(t){return"function"==typeof t}function u(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function h(t){let e;return function(t,...e){if(null==t)return s;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}(t,(t=>e=t))(),e}function l(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function d(t,e){const n={};e=new Set(e);for(const s in t)e.has(s)||"$"===s[0]||(n[s]=t[s]);return n}function $(t,e){t.appendChild(e)}function g(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function b(){return t=" ",document.createTextNode(t);var t}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function x(t,e,n,s){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function y(t){const e={};for(const n of t)e[n.name]=n.value;return e}let v;function w(t){v=t}function E(){if(!v)throw new Error("Function called outside component initialization");return v}function _(t){E().$$.on_mount.push(t)}function k(){const t=E();return(e,n,{cancelable:s=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=function(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,s,e),i}(e,n,{cancelable:s});return i.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}function C(t,e){return E().$$.context.set(t,e),e}const z=[],j=[],N=[],O=[],S=Promise.resolve();let A=!1;function P(){A||(A=!0,S.then(B))}function R(t){N.push(t)}const T=new Set;let M=0;function B(){const t=v;do{for(;M<z.length;){const t=z[M];M++,w(t),G(t.$$)}for(w(null),z.length=0,M=0;j.length;)j.pop()();for(let t=0;t<N.length;t+=1){const e=N[t];T.has(e)||(T.add(e),e())}N.length=0}while(z.length);for(;O.length;)O.pop()();A=!1,T.clear(),w(t)}function G(t){if(null!==t.fragment){t.update(),c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(R)}}const H=new Set;function L(t,e,n,i,u,h,l,d=[-1]){const $=v;w(t);const g=t.$$={fragment:null,ctx:null,props:h,update:s,not_equal:u,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||($?$.$$.context:[])),callbacks:o(),dirty:d,skip_bound:!1,root:e.target||$.$$.root};l&&l(g.root);let f=!1;if(g.ctx=n?n(t,e.props||{},((e,n,...s)=>{const i=s.length?s[0]:n;return g.ctx&&u(g.ctx[e],g.ctx[e]=i)&&(!g.skip_bound&&g.bound[e]&&g.bound[e](i),f&&function(t,e){-1===t.$$.dirty[0]&&(z.push(t),P(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],g.update(),f=!0,c(g.before_update),g.fragment=!!i&&i(g.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);g.fragment&&g.fragment.l(t),t.forEach(p)}else g.fragment&&g.fragment.c();e.intro&&((b=t.$$.fragment)&&b.i&&(H.delete(b),b.i(m))),function(t,e,n,s){const{fragment:i,on_mount:o,on_destroy:u,after_update:h}=t.$$;i&&i.m(e,n),s||R((()=>{const e=o.map(r).filter(a);u?u.push(...e):c(e),t.$$.on_mount=[]})),h.forEach(R)}(t,e.target,e.anchor,e.customElement),B()}var b,m;w($)}let q;"function"==typeof HTMLElement&&(q=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(r).filter(a);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){c(this.$$.on_disconnect)}$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(c(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=s}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});const D=[];function F(t,e=s){let n;const i=new Set;function r(e){if(u(t,e)&&(t=e,n)){const e=!D.length;for(const e of i)e[1](),D.push(e,t);if(e){for(let t=0;t<D.length;t+=2)D[t][0](D[t+1]);D.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(o,c=s){const a=[o,c];return i.add(a),1===i.size&&(n=e(r)||s),o(t),()=>{i.delete(a),0===i.size&&(n(),n=null)}}}}const X=String(Symbol("x6ContextSymbol")),I=String(Symbol("x6cellContextSymbol"));function J(t,e){const n=E();return(P(),S).then((()=>{const t=n.parentNode,e=n.$$.context;n.$$.root.getRootNode().host;const s=t&&t.$$&&t.$$.context,i=s&&s.get(X);i&&e.set(X,i);return{graph:i,parent:s&&s.get(I),cell:e.get(I)}})).then((t=>(e&&e(t),t)))}function K(t){let e,n,i,r,o,c;return{c(){e=f("link"),n=b(),i=f("div"),r=f("div"),o=b(),c=f("div"),c.innerHTML="<slot></slot>",this.c=s,m(e,"rel","stylesheet"),m(e,"type","text/css"),m(e,"href",t[0]),m(r,"data-testid","custom-element"),m(r,"class","graph-core"),x(r,"width","100%"),x(r,"height","100%"),m(c,"class","graph-component"),m(i,"class","graph-contaner"),x(i,"width","100%"),x(i,"height","100%"),x(i,"position","relative")},m(s,a){g(s,e,a),g(s,n,a),g(s,i,a),$(i,r),t[5](r),$(i,o),$(i,c)},p(t,[n]){1&n&&m(e,"href",t[0])},i:s,o:s,d(s){s&&p(e),s&&p(n),s&&p(i),t[5](null)}}}function Q(t,e,s){let i,{width:r=800}=e,{height:o=600}=e,{panning:c=!0}=e,{css:a="https://cdnjs.cloudflare.com/ajax/libs/antv-x6/1.34.0/x6.min.css"}=e,u=F(null);return C(X,u),_((()=>{const t=new n.Graph({container:i,width:r,height:o,panning:!!c});return u.set(t),()=>{t.dispose()}})),t.$$set=t=>{"width"in t&&s(2,r=t.width),"height"in t&&s(3,o=t.height),"panning"in t&&s(4,c=t.panning),"css"in t&&s(0,a=t.css)},[a,i,r,o,c,function(t){j[t?"unshift":"push"]((()=>{i=t,s(1,i)}))}]}function U(t){return{c(){this.c=s},m:s,p:s,i:s,o:s,d:s}}function V(t,e,n){let{enabled:i=!0}=e;const r={color:"#f5f5f5"};let o=s;return _((()=>()=>o())),J().then((t=>{const e=h(t.graph);if(e){const t=Object.assign({},r,{enabled:i});e.clearBackground(),e.drawBackground(t)}o=()=>{e&&e.clearBackground()}})),t.$$set=t=>{"enabled"in t&&n(0,i=t.enabled)},[i]}customElements.define("x6-graph",class extends q{constructor(t){super(),L(this,{target:this.shadowRoot,props:y(this.attributes),customElement:!0},Q,K,u,{width:2,height:3,panning:4,css:0},null),t&&(t.target&&g(t.target,this,t.anchor),t.props&&(this.$set(t.props),B()))}static get observedAttributes(){return["width","height","panning","css"]}get width(){return this.$$.ctx[2]}set width(t){this.$$set({width:t}),B()}get height(){return this.$$.ctx[3]}set height(t){this.$$set({height:t}),B()}get panning(){return this.$$.ctx[4]}set panning(t){this.$$set({panning:t}),B()}get css(){return this.$$.ctx[0]}set css(t){this.$$set({css:t}),B()}});function W(t){return{c(){this.c=s},m:s,p:s,i:s,o:s,d:s}}function Y(t,e,n){let{visible:i=!0}=e,{size:r=10}=e,{type:o="dot"}=e;const c={size:10,visible:!0,type:"dot",args:{color:"#a0a0a0",thickness:1}};let a=s;return _((()=>()=>a())),J().then((t=>{const e=h(t.graph);if(e){const t=Object.assign({},c,{visible:i,size:r,type:o});e.clearGrid(),e.drawGrid(t)}a=()=>{e&&e.clearGrid()}})),t.$$set=t=>{"visible"in t&&n(0,i=t.visible),"size"in t&&n(1,r=t.size),"type"in t&&n(2,o=t.type)},[i,r,o]}customElements.define("x6-background",class extends q{constructor(t){super(),L(this,{target:this.shadowRoot,props:y(this.attributes),customElement:!0},V,U,u,{enabled:0},null),t&&(t.target&&g(t.target,this,t.anchor),t.props&&(this.$set(t.props),B()))}static get observedAttributes(){return["enabled"]}get enabled(){return this.$$.ctx[0]}set enabled(t){this.$$set({enabled:t}),B()}});customElements.define("x6-grid",class extends q{constructor(t){super(),L(this,{target:this.shadowRoot,props:y(this.attributes),customElement:!0},Y,W,u,{visible:0,size:1,type:2},null),t&&(t.target&&g(t.target,this,t.anchor),t.props&&(this.$set(t.props),B()))}static get observedAttributes(){return["visible","size","type"]}get visible(){return this.$$.ctx[0]}set visible(t){this.$$set({visible:t}),B()}get size(){return this.$$.ctx[1]}set size(t){this.$$set({size:t}),B()}get type(){return this.$$.ctx[2]}set type(t){this.$$set({type:t}),B()}});const Z=(e,n,s,i)=>{const r=h(e.graph),o=h(e.parent);if(r){const{shape:e}=n,c=new(t.Node.registry.get(e)||t.Edge.registry.get(e)||t.Cell)(n);s.set(c),c.once("added",(t=>i("added",t))),c.once("removed",(t=>i("removed",t))),c.on("cell:change:*",(t=>i("change",t))),o&&o.addChild(c),r.addCell(c)}return()=>{const t=h(s);o&&o.removeChild(t),r&&r.removeCell(t)}};function tt(t){let e;return{c(){e=f("slot"),this.c=s},m(t,n){g(t,e,n)},p:s,i:s,o:s,d(t){t&&p(e)}}}function et(t,e,n){let r;const o=["id","shape","label","x","y","width","height","angle"];let c=d(e,o),a=F(null);C(I,a);const u=k();let{id:h}=e,{shape:$="rect"}=e,{label:g=""}=e,{x:p=0}=e,{y:f=0}=e,{width:b=160}=e,{height:m=40}=e,{angle:x=0}=e,y=s;return _((()=>()=>y())),J().then((t=>{y=Z(t,r,a,u)})),t.$$set=t=>{e=i(i({},e),l(t)),n(12,c=d(e,o)),"id"in t&&n(0,h=t.id),"shape"in t&&n(1,$=t.shape),"label"in t&&n(2,g=t.label),"x"in t&&n(3,p=t.x),"y"in t&&n(4,f=t.y),"width"in t&&n(5,b=t.width),"height"in t&&n(6,m=t.height),"angle"in t&&n(7,x=t.angle)},t.$$.update=()=>{r={...c,id:h,shape:$,label:g,width:Number(b)||160,height:Number(m)||40,x:Number(p)||0,y:Number(f)||0,angle:Number(x)||0}},[h,$,g,p,f,b,m,x]}function nt(t){return{c(){this.c=s},m:s,p:s,i:s,o:s,d:s}}function st(t,e,n){let r;const o=["id","shape","source","target"];let c=d(e,o),{id:a}=e,{shape:u="edge"}=e,{source:h}=e,{target:$}=e,g=F(null);C(I,g);const p=k();let f=s;return _((()=>()=>f())),J().then((t=>{f=Z(t,r,g,p)})),t.$$set=t=>{e=i(i({},e),l(t)),n(8,c=d(e,o)),"id"in t&&n(0,a=t.id),"shape"in t&&n(1,u=t.shape),"source"in t&&n(2,h=t.source),"target"in t&&n(3,$=t.target)},t.$$.update=()=>{r={...c,id:a,shape:u,source:h,target:$}},[a,u,h,$]}customElements.define("x6-node",class extends q{constructor(t){super(),L(this,{target:this.shadowRoot,props:y(this.attributes),customElement:!0},et,tt,u,{id:0,shape:1,label:2,x:3,y:4,width:5,height:6,angle:7},null),t&&(t.target&&g(t.target,this,t.anchor),t.props&&(this.$set(t.props),B()))}static get observedAttributes(){return["id","shape","label","x","y","width","height","angle"]}get id(){return this.$$.ctx[0]}set id(t){this.$$set({id:t}),B()}get shape(){return this.$$.ctx[1]}set shape(t){this.$$set({shape:t}),B()}get label(){return this.$$.ctx[2]}set label(t){this.$$set({label:t}),B()}get x(){return this.$$.ctx[3]}set x(t){this.$$set({x:t}),B()}get y(){return this.$$.ctx[4]}set y(t){this.$$set({y:t}),B()}get width(){return this.$$.ctx[5]}set width(t){this.$$set({width:t}),B()}get height(){return this.$$.ctx[6]}set height(t){this.$$set({height:t}),B()}get angle(){return this.$$.ctx[7]}set angle(t){this.$$set({angle:t}),B()}});customElements.define("x6-edge",class extends q{constructor(t){super(),L(this,{target:this.shadowRoot,props:y(this.attributes),customElement:!0},st,nt,u,{id:0,shape:1,source:2,target:3},null),t&&(t.target&&g(t.target,this,t.anchor),t.props&&(this.$set(t.props),B()))}static get observedAttributes(){return["id","shape","source","target"]}get id(){return this.$$.ctx[0]}set id(t){this.$$set({id:t}),B()}get shape(){return this.$$.ctx[1]}set shape(t){this.$$set({shape:t}),B()}get source(){return this.$$.ctx[2]}set source(t){this.$$set({source:t}),B()}get target(){return this.$$.ctx[3]}set target(t){this.$$set({target:t}),B()}})}));
