!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@antv/x6")):"function"==typeof define&&define.amd?define(["@antv/x6"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).x6)}(this,(function(t){"use strict";function e(){}function n(t,e){for(const n in e)t[n]=e[n];return t}function s(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(s)}function o(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t){let n;return function(t,...n){if(null==t)return e;const s=t.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(t,(t=>n=t))(),n}function u(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function h(t,e){const n={};e=new Set(e);for(const s in t)e.has(s)||"$"===s[0]||(n[s]=t[s]);return n}function l(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode.removeChild(t)}function g(t){return document.createElement(t)}function p(){return t=" ",document.createTextNode(t);var t}function f(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e,n,s){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function m(t){const e={};for(const n of t)e[n.name]=n.value;return e}let x;function y(t){x=t}function w(){if(!x)throw new Error("Function called outside component initialization");return x}function v(t){w().$$.on_mount.push(t)}function E(){const t=w();return(e,n,{cancelable:s=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=function(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,s,e),i}(e,n,{cancelable:s});return i.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}function _(t,e){return w().$$.context.set(t,e),e}const k=[],C=[],z=[],N=[],S=Promise.resolve();let A=!1;function j(){A||(A=!0,S.then(B))}function R(t){z.push(t)}const T=new Set;let O=0;function B(){const t=x;do{for(;O<k.length;){const t=k[O];O++,y(t),G(t.$$)}for(y(null),k.length=0,O=0;C.length;)C.pop()();for(let t=0;t<z.length;t+=1){const e=z[t];T.has(e)||(T.add(e),e())}z.length=0}while(k.length);for(;N.length;)N.pop()();A=!1,T.clear(),y(t)}function G(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(R)}}const M=new Set;function P(t,n,c,a,u,h,l,d=[-1]){const g=x;y(t);const p=t.$$={fragment:null,ctx:null,props:h,update:e,not_equal:u,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(g?g.$$.context:[])),callbacks:i(),dirty:d,skip_bound:!1,root:n.target||g.$$.root};l&&l(p.root);let f=!1;if(p.ctx=c?c(t,n.props||{},((e,n,...s)=>{const i=s.length?s[0]:n;return p.ctx&&u(p.ctx[e],p.ctx[e]=i)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](i),f&&function(t,e){-1===t.$$.dirty[0]&&(k.push(t),j(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],p.update(),f=!0,r(p.before_update),p.fragment=!!a&&a(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach($)}else p.fragment&&p.fragment.c();n.intro&&((b=t.$$.fragment)&&b.i&&(M.delete(b),b.i(m))),function(t,e,n,i){const{fragment:c,on_mount:a,on_destroy:u,after_update:h}=t.$$;c&&c.m(e,n),i||R((()=>{const e=a.map(s).filter(o);u?u.push(...e):r(e),t.$$.on_mount=[]})),h.forEach(R)}(t,n.target,n.anchor,n.customElement),B()}var b,m;y(g)}let H;"function"==typeof HTMLElement&&(H=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(s).filter(o);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){r(this.$$.on_disconnect)}$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=e}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});const L=[];function q(t,n=e){let s;const i=new Set;function r(e){if(c(t,e)&&(t=e,s)){const e=!L.length;for(const e of i)e[1](),L.push(e,t);if(e){for(let t=0;t<L.length;t+=2)L[t][0](L[t+1]);L.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(o,c=e){const a=[o,c];return i.add(a),1===i.size&&(s=n(r)||e),o(t),()=>{i.delete(a),0===i.size&&(s(),s=null)}}}}const F=String(Symbol("x6ContextSymbol")),D=String(Symbol("x6cellContextSymbol"));function I(t,e){const n=w();return(j(),S).then((()=>{const t=n.parentNode,e=n.$$.context;n.$$.root.getRootNode().host;const s=t&&t.$$&&t.$$.context,i=s&&s.get(F);i&&e.set(F,i);return{graph:i,parent:s&&s.get(D),cell:e.get(D)}})).then((t=>(e&&e(t),t)))}function J(t){let n,s,i,r,o,c;return{c(){n=g("link"),s=p(),i=g("div"),r=g("div"),o=p(),c=g("div"),c.innerHTML="<slot></slot>",this.c=e,f(n,"rel","stylesheet"),f(n,"type","text/css"),f(n,"href",t[0]),f(r,"data-testid","custom-element"),f(r,"class","graph-core"),b(r,"width","100%"),b(r,"height","100%"),f(c,"class","graph-component"),f(i,"class","graph-contaner"),b(i,"width","100%"),b(i,"height","100%"),b(i,"position","relative")},m(e,a){d(e,n,a),d(e,s,a),d(e,i,a),l(i,r),t[5](r),l(i,o),l(i,c)},p(t,[e]){1&e&&f(n,"href",t[0])},i:e,o:e,d(e){e&&$(n),e&&$(s),e&&$(i),t[5](null)}}}function K(e,n,s){let i,{width:r=800}=n,{height:o=600}=n,{panning:c=!0}=n,{css:a="https://cdnjs.cloudflare.com/ajax/libs/antv-x6/1.34.0/x6.min.css"}=n,u=q(null);return _(F,u),v((()=>{const e=new t.Graph({container:i,width:r,height:o,panning:!!c});return u.set(e),()=>{e.dispose()}})),e.$$set=t=>{"width"in t&&s(2,r=t.width),"height"in t&&s(3,o=t.height),"panning"in t&&s(4,c=t.panning),"css"in t&&s(0,a=t.css)},[a,i,r,o,c,function(t){C[t?"unshift":"push"]((()=>{i=t,s(1,i)}))}]}function Q(t){return{c(){this.c=e},m:e,p:e,i:e,o:e,d:e}}function U(t,n,s){let{enabled:i=!0}=n;const r={color:"#f5f5f5"};let o=e;return v((()=>()=>o())),I().then((t=>{const e=a(t.graph);if(e){const t=Object.assign({},r,{enabled:i});e.clearBackground(),e.drawBackground(t)}o=()=>{e&&e.clearBackground()}})),t.$$set=t=>{"enabled"in t&&s(0,i=t.enabled)},[i]}customElements.define("x6-graph",class extends H{constructor(t){super(),P(this,{target:this.shadowRoot,props:m(this.attributes),customElement:!0},K,J,c,{width:2,height:3,panning:4,css:0},null),t&&(t.target&&d(t.target,this,t.anchor),t.props&&(this.$set(t.props),B()))}static get observedAttributes(){return["width","height","panning","css"]}get width(){return this.$$.ctx[2]}set width(t){this.$$set({width:t}),B()}get height(){return this.$$.ctx[3]}set height(t){this.$$set({height:t}),B()}get panning(){return this.$$.ctx[4]}set panning(t){this.$$set({panning:t}),B()}get css(){return this.$$.ctx[0]}set css(t){this.$$set({css:t}),B()}});function V(t){return{c(){this.c=e},m:e,p:e,i:e,o:e,d:e}}function W(t,n,s){let{visible:i=!0}=n,{size:r=10}=n,{type:o="dot"}=n;const c={size:10,visible:!0,type:"dot",args:{color:"#a0a0a0",thickness:1}};let u=e;return v((()=>()=>u())),I().then((t=>{const e=a(t.graph);if(e){const t=Object.assign({},c,{visible:i,size:r,type:o});e.clearGrid(),e.drawGrid(t)}u=()=>{e&&e.clearGrid()}})),t.$$set=t=>{"visible"in t&&s(0,i=t.visible),"size"in t&&s(1,r=t.size),"type"in t&&s(2,o=t.type)},[i,r,o]}customElements.define("x6-background",class extends H{constructor(t){super(),P(this,{target:this.shadowRoot,props:m(this.attributes),customElement:!0},U,Q,c,{enabled:0},null),t&&(t.target&&d(t.target,this,t.anchor),t.props&&(this.$set(t.props),B()))}static get observedAttributes(){return["enabled"]}get enabled(){return this.$$.ctx[0]}set enabled(t){this.$$set({enabled:t}),B()}});customElements.define("x6-grid",class extends H{constructor(t){super(),P(this,{target:this.shadowRoot,props:m(this.attributes),customElement:!0},W,V,c,{visible:0,size:1,type:2},null),t&&(t.target&&d(t.target,this,t.anchor),t.props&&(this.$set(t.props),B()))}static get observedAttributes(){return["visible","size","type"]}get visible(){return this.$$.ctx[0]}set visible(t){this.$$set({visible:t}),B()}get size(){return this.$$.ctx[1]}set size(t){this.$$set({size:t}),B()}get type(){return this.$$.ctx[2]}set type(t){this.$$set({type:t}),B()}});const X=(e,n,s,i)=>{const r=a(e.graph),o=a(e.parent);if(r){const{shape:e}=n,c=new(t.Node.registry.get(e)||t.Edge.registry.get(e)||t.Cell)(n);s.set(c),c.once("added",(t=>i("added",t))),c.once("removed",(t=>i("removed",t))),c.on("cell:change:*",(t=>i("change",t))),o&&o.addChild(c),r.addCell(c)}return()=>{const t=a(s);o&&o.removeChild(t),r&&r.removeCell(t)}};function Y(t){let n;return{c(){n=g("slot"),this.c=e},m(t,e){d(t,n,e)},p:e,i:e,o:e,d(t){t&&$(n)}}}function Z(t,s,i){let r;const o=["id","shape","label","x","y","width","height","angle"];let c=h(s,o),a=q(null);_(D,a);const l=E();let{id:d}=s,{shape:$="rect"}=s,{label:g=""}=s,{x:p=0}=s,{y:f=0}=s,{width:b=160}=s,{height:m=40}=s,{angle:x=0}=s,y=e;return v((()=>()=>y())),I().then((t=>{y=X(t,r,a,l)})),t.$$set=t=>{s=n(n({},s),u(t)),i(12,c=h(s,o)),"id"in t&&i(0,d=t.id),"shape"in t&&i(1,$=t.shape),"label"in t&&i(2,g=t.label),"x"in t&&i(3,p=t.x),"y"in t&&i(4,f=t.y),"width"in t&&i(5,b=t.width),"height"in t&&i(6,m=t.height),"angle"in t&&i(7,x=t.angle)},t.$$.update=()=>{r={...c,id:d,shape:$,label:g,width:Number(b)||160,height:Number(m)||40,x:Number(p)||0,y:Number(f)||0,angle:Number(x)||0}},[d,$,g,p,f,b,m,x]}function tt(t){return{c(){this.c=e},m:e,p:e,i:e,o:e,d:e}}function et(t,s,i){let r;const o=["id","shape","source","target"];let c=h(s,o),{id:a}=s,{shape:l="edge"}=s,{source:d}=s,{target:$}=s,g=q(null);_(D,g);const p=E();let f=e;return v((()=>()=>f())),I().then((t=>{f=X(t,r,g,p)})),t.$$set=t=>{s=n(n({},s),u(t)),i(8,c=h(s,o)),"id"in t&&i(0,a=t.id),"shape"in t&&i(1,l=t.shape),"source"in t&&i(2,d=t.source),"target"in t&&i(3,$=t.target)},t.$$.update=()=>{r={...c,id:a,shape:l,source:d,target:$}},[a,l,d,$]}customElements.define("x6-node",class extends H{constructor(t){super(),P(this,{target:this.shadowRoot,props:m(this.attributes),customElement:!0},Z,Y,c,{id:0,shape:1,label:2,x:3,y:4,width:5,height:6,angle:7},null),t&&(t.target&&d(t.target,this,t.anchor),t.props&&(this.$set(t.props),B()))}static get observedAttributes(){return["id","shape","label","x","y","width","height","angle"]}get id(){return this.$$.ctx[0]}set id(t){this.$$set({id:t}),B()}get shape(){return this.$$.ctx[1]}set shape(t){this.$$set({shape:t}),B()}get label(){return this.$$.ctx[2]}set label(t){this.$$set({label:t}),B()}get x(){return this.$$.ctx[3]}set x(t){this.$$set({x:t}),B()}get y(){return this.$$.ctx[4]}set y(t){this.$$set({y:t}),B()}get width(){return this.$$.ctx[5]}set width(t){this.$$set({width:t}),B()}get height(){return this.$$.ctx[6]}set height(t){this.$$set({height:t}),B()}get angle(){return this.$$.ctx[7]}set angle(t){this.$$set({angle:t}),B()}});customElements.define("x6-edge",class extends H{constructor(t){super(),P(this,{target:this.shadowRoot,props:m(this.attributes),customElement:!0},et,tt,c,{id:0,shape:1,source:2,target:3},null),t&&(t.target&&d(t.target,this,t.anchor),t.props&&(this.$set(t.props),B()))}static get observedAttributes(){return["id","shape","source","target"]}get id(){return this.$$.ctx[0]}set id(t){this.$$set({id:t}),B()}get shape(){return this.$$.ctx[1]}set shape(t){this.$$set({shape:t}),B()}get source(){return this.$$.ctx[2]}set source(t){this.$$set({source:t}),B()}get target(){return this.$$.ctx[3]}set target(t){this.$$set({target:t}),B()}})}));
